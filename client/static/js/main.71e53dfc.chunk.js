(this["webpackJsonposb-broker-ui"]=this["webpackJsonposb-broker-ui"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(35),r=a.n(s),i=(a(85),a(86),a(19)),l=a.n(i),d=a(27),j=a(9),o=a(113),b=a(114),u=a(118),h=a(119),m=a(101),O=a(115),x=a(78),p=(a(88),a(7)),g=a(116),f=a(52),v=a(58),N=a(62),w=a(59),k=a(60),y=a(50),I=a(55),S=a(57),C=a(56),D=a(51),E=a(31),T=a(110),P=a(111),U=(a(89),a(18)),_=a.n(U),H=(a(70),function(e){var t=[];return e.map((function(e){var a=e.instanceId,c=e.name,n=e.planId,s=e.status,r=e.region,i=e.updateDate;return t.push({id:a,instanceId:a,name:c,planId:n,status:s,region:r,updateDate:new Date(i).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},"-")}),!0})),t}),L=function(){var e=Object(d.a)(l.a.mark((function e(t,a){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a).then((function(e){return e})).then((function(e){return e.json()}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),M=a(44),F={buildNumber:M.a.BUILD_NUMBER||"test_version_0.1",brokerCreds:{brokerUsername:M.a.BROKER_USERNAME||"admin",brokerPassword:M.a.BROKER_PASSWORD||"admin"},tableTitles:{Objects:"Objects and metadata",Instances:"Instances"},tables:["Objects","Instances"],apiUrls:{getCatalog:"/v2/catalog",getInstances:"/support/instances"},tableHeaders:{Objects:[{header:"Name",key:"name"},{header:"Kind",key:"kind"},{header:"ID",key:"objectId"},{header:"Updated",key:"updated"}],Instances:[{header:"ID",key:"instanceId"},{header:"Name",key:"name"},{header:"Status",key:"status"},{header:"Updated",key:"updateDate"}],Metric:[{header:"Metric",key:"metric"},{header:"Type",key:"type"},{header:"ID",key:"metricId"}],TestMetric:[{header:"Metric Quantity",key:"metric"},{header:"Cost per unit",key:"cost"},{header:"Charge",key:"charge"}]}},R=a(3);function A(e){var t=e.catalog,a=Object(c.useState)([]),n=Object(j.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)([]),l=Object(j.a)(i,2),d=l[0],o=l[1];return Object(c.useEffect)((function(){_.a.isEmpty(t)||(o(F.tableHeaders.Objects),r(function(e){var t=[];return e.map((function(e){var a=e.id,c=e.id,n=e.name,s=e.metadata;return t.push({id:a,objectId:c,name:n,kind:"Service",updated:new Date(s.updated).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},"-")}),e.plans.map((function(e){var a=e.id,c=e.id,n=e.name,s=e.metadata;return t.push({id:a,objectId:c,name:n,kind:"Pricing Plan",updated:new Date(s.updated).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},"-")}),!0})),!0})),t}(t.services)))}),[t]),Object(R.jsx)("div",{className:"bx--grid object-info",children:Object(R.jsx)("div",{className:"bx--row",children:Object(R.jsx)("div",{className:"bx--col-lg-16",children:Object(R.jsx)(g.a,{isSortable:!0,rows:s,headers:d,children:function(e){var t=e.rows,a=e.headers,c=e.getHeaderProps,n=e.getRowProps,s=e.getTableProps,r=e.onInputChange;return Object(R.jsxs)(f.a,{title:F.tableTitles.Objects,children:[Object(R.jsxs)(v.a,{children:[Object(R.jsx)(N.a,{placeholder:"Search...",onChange:r}),Object(R.jsxs)(w.a,{children:[Object(R.jsx)(k.a,{disabled:!0,children:[],renderIcon:T.a,iconDescription:"download",onClick:function(e){console.log(e)}},"download"),Object(R.jsx)(k.a,{disabled:!0,children:[],renderIcon:P.a,iconDescription:"reload",onClick:function(e){console.log(e)}},"refresh")]})]}),Object(R.jsxs)(y.a,Object(p.a)(Object(p.a)({},s()),{},{children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(S.a,{children:a.map((function(e,t){return Object(R.jsx)(C.a,Object(p.a)(Object(p.a)({},c({header:e})),{},{children:e.header}),t)}))})}),Object(R.jsx)(D.a,{children:t.map((function(e,t){return Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(S.a,Object(p.a)(Object(p.a)({},n({row:e})),{},{children:e.cells.map((function(e){return Object(R.jsx)(E.a,{children:e.value},e.id)}))}),e.id)})}))})]}))]},"tableContainer")}})})})})}A.displayName="Objects";var B=A,J=a(61),K=a(53),V=a(54),G=(a(94),a(112)),Z=a(117),q=a(109),Q=a(107);a(95);function W(e){var t=e.closePanel,a=e.instance,n=e.metrics,s=e.plan,r=Object(c.useState)({}),i=Object(j.a)(r,2),l=i[0],d=i[1],o=Object(c.useState)(!1),b=Object(j.a)(o,2),m=b[0],O=b[1];Object(c.useEffect)((function(){if(_.a.isEmpty(l)){var e={};n.map((function(t){return e[""+t.metric]=parseFloat(0),!0})),d(e),O(!m)}}),[]);var x=function(e){var t=l;t[e.imaginaryTarget.id]=e.imaginaryTarget.value,d(t),O(!m)},v=function(e,t){n.find((function(t){return t.metric===e})).price.prices[0].quantity_tier;return t*n.find((function(t){return t.metric===e})).price.prices[0].price},N=function(){var e=0;return Object.keys(l).map((function(t){var a=v(t,l[t]);e+=parseFloat(a)})),e};return Object(R.jsx)(G.a,{"aria-label":"metric side panel","aria-labelledby":"side panel",expanded:!0,children:Object(R.jsxs)("div",{className:"bx--grid",children:[Object(R.jsxs)("div",{className:"bx--row",children:[Object(R.jsx)("div",{className:"bx--col-lg-14",children:Object(R.jsx)("h3",{children:"Estimation and pricing"})}),Object(R.jsx)("div",{className:"bx--col-lg-2",children:Object(R.jsx)(h.a,{kind:"ghost",onClick:t,className:"panel-close-btn",renderIcon:q.a,iconDescription:"close panel"})})]}),Object(R.jsx)("div",{className:"bx--row sub-row",children:Object(R.jsxs)("div",{className:"bx--col-lg-16",children:[Object(R.jsx)("div",{className:"bx--label",children:"Pricing plan name"}),Object(R.jsx)(u.a,{className:"panel-ele-70",children:s.name})]})}),Object(R.jsx)("div",{className:"bx--row sub-row",children:Object(R.jsxs)("div",{className:"bx--col-lg-16",children:[Object(R.jsx)("div",{className:"bx--label",children:"Pricing plan programmatic name"}),Object(R.jsx)(u.a,{className:"panel-ele-70",children:s.name})]})}),Object(R.jsx)("div",{className:"bx--row sub-row",children:Object(R.jsxs)("div",{className:"bx--col-lg-16",children:[Object(R.jsx)("div",{className:"bx--label",children:"Location"}),Object(R.jsx)(u.a,{className:"panel-ele-70",children:a.region})]})}),Object(R.jsx)("div",{className:"bx--row sub-row",children:Object(R.jsx)("div",{className:"bx--col-lg-16",children:Object(R.jsx)("h5",{children:"Estimation"})})}),n.map((function(e,t){return Object(R.jsxs)("div",{className:"bx--row sub-row",children:[Object(R.jsxs)("div",{className:"bx--col-lg-8",children:[Object(R.jsx)("div",{className:"bx--label",children:e.metric}),Object(R.jsx)(Z.a,{onChange:x,id:e.metric,min:0})]}),Object(R.jsxs)("div",{className:"bx--col-lg-8 text-right",children:[Object(R.jsx)("div",{className:"bx--label",children:"Estimated monthly charge"}),Object(R.jsxs)("h6",{children:[v(e.metric,l[e.metric])," USD"]})]})]},t)})),Object(R.jsx)("div",{className:"bx--row sub-row",children:Object(R.jsx)("div",{className:"bx--col-lg-16",children:Object(R.jsx)("h5",{children:"Testing"})})}),Object(R.jsxs)("div",{className:"bx--row sub-row testing-row",children:[Object(R.jsx)("div",{className:"bx--col-lg-16",children:"Once you've entered values for any metrics you'd ike to test, you can fire corresponding usage events using our wonderful button."}),Object(R.jsx)("div",{className:"bx--col-lg-16 sub-row",children:Object(R.jsx)(g.a,{rows:n,headers:F.tableHeaders.TestMetric,children:function(e){var t=e.rows,a=e.headers,c=e.getHeaderProps,s=e.getTableProps;return Object(R.jsx)(f.a,{title:"",children:Object(R.jsxs)(y.a,Object(p.a)(Object(p.a)({className:"metric-table"},s()),{},{children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(S.a,{children:a.map((function(e,t){return Object(R.jsx)(C.a,Object(p.a)(Object(p.a)({},c({header:e})),{},{children:e.header}),t)}))})}),Object(R.jsx)(D.a,{className:"metric-table-body",children:t.map((function(e,t){return Object(R.jsxs)(S.a,{children:[Object(R.jsxs)(E.a,{style:{backgroundColor:"#f4f4f4",paddingLeft:"1rem"},children:[Object(R.jsx)("strong",{children:l[e.cells[0].value]})," ",e.cells[0].value]},e.cells[0].id),Object(R.jsxs)(E.a,{style:{backgroundColor:"#f4f4f4",paddingLeft:"1rem",textAlign:"right"},children:[(a=e.cells[0].value,n.find((function(e){return e.metric===a})).price.prices[0].price)," USD"]},e.cells[1].id),Object(R.jsx)(E.a,{style:{backgroundColor:"#f4f4f4",paddingLeft:"1rem",textAlign:"right"},children:v(e.cells[0].value,l[e.cells[0].value])},e.cells[2].id)]},e.id);var a}))})]}))})}})})]}),Object(R.jsxs)("div",{className:"bx--row sub-row testing-row testing-row-bottom",children:[Object(R.jsx)("div",{className:"bx--col-lg-8",children:Object(R.jsx)("h6",{children:"Total"})}),Object(R.jsxs)("div",{className:"bx--col-lg-8 text-right",children:[N()," USD"]}),Object(R.jsx)("div",{className:"bx--col-lg-16 sub-row",children:Object(R.jsx)(h.a,{disabled:N()<=0,renderIcon:Q.a,iconDescription:"send test metric",children:"Send metering data"})})]})]})})}W.displayName="MetricPanel";var Y=W;a(67);function z(e){var t=e.catalog,a=Object(c.useState)([]),n=Object(j.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)([]),o=Object(j.a)(i,2),b=o[0],u=o[1],m=Object(c.useState)(!1),O=Object(j.a)(m,2),x=O[0],M=O[1],A=Object(c.useState)([]),B=Object(j.a)(A,2),G=B[0],Z=B[1],q=Object(c.useState)(""),Q=Object(j.a)(q,2),W=Q[0],z=Q[1],X=Object(c.useState)(""),$=Object(j.a)(X,2),ee=$[0],te=$[1],ae=Object(c.useState)([]),ce=Object(j.a)(ae,2),ne=ce[0],se=ce[1];Object(c.useEffect)((function(){u(F.tableHeaders.Instances),!_.a.isEmpty(t)&&_.a.isEmpty(s)&&re()}),[t]);var re=function(){var e=Object(d.a)(l.a.mark((function e(){var t,a,c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Headers).append("Content-Type","application/json"),t.append("Accept","application/json"),a={method:"GET",headers:t,redirect:"follow",mode:"cors"},e.next=6,L(F.apiUrls.getInstances,a);case 6:c=e.sent,n=H(c),r(n),le();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(e){z(s[e.target.id]);var a=s.find((function(t){return t.instanceId===e.target.name})).planId;se(de(a)),te(t.services[0].plans.find((function(e){return e.id===a}))),M(!x)},le=function(){var e=Object(d.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],t.services[0].plans.map((function(e){return a.push({planId:e.id,metrics:e.metadata.costs.metrics.map((function(e){var t=e.amounts.find((function(e){return"USA"===e.country}));return{id:e.metric_id,metric:e.charge_unit_display_name,metricId:e.metric_id,type:e.tier_model,price:t}}))}),!0})),Z(a);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(e){return G.find((function(t){return t.planId===e})).metrics};return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("div",{className:"bx--grid instances-info",children:Object(R.jsx)("div",{className:"bx--row",children:Object(R.jsx)("div",{className:"bx--col-lg-16",children:Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(g.a,{rows:s,headers:b,children:function(e){var t=e.rows,a=e.headers,c=e.getHeaderProps,n=e.getRowProps,r=e.getTableProps,i=e.onInputChange;return Object(R.jsxs)(f.a,{title:F.tableTitles.Instances,children:[Object(R.jsxs)(v.a,{children:[Object(R.jsx)(N.a,{placeholder:"Search...",onChange:i}),Object(R.jsxs)(w.a,{children:[Object(R.jsx)(k.a,{disabled:!0,children:[],renderIcon:T.a,iconDescription:"Download",onClick:function(e){console.log(e)}},"download"),Object(R.jsx)(k.a,{disabled:!0,children:[],renderIcon:P.a,iconDescription:"Reload",onClick:function(e){console.log(e)}},"refresh")]})]}),Object(U.isEmpty)(s)?Object(R.jsxs)("div",{className:"empty-message",children:[Object(R.jsx)("h5",{children:"No Instances Found."}),Object(R.jsx)("p",{children:"Provision instances to see this list."})]}):Object(R.jsxs)(y.a,Object(p.a)(Object(p.a)({},r()),{},{children:[Object(R.jsx)(I.a,{children:Object(R.jsxs)(S.a,{children:[Object(R.jsx)(J.a,{}),a.map((function(e,t){return Object(R.jsx)(C.a,Object(p.a)(Object(p.a)({},c({header:e})),{},{children:e.header}),t)}))]})}),Object(R.jsx)(D.a,{children:t.map((function(e,t){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(K.a,Object(p.a)(Object(p.a)({},n({row:e})),{},{children:e.cells.map((function(e){return Object(R.jsx)(E.a,{children:e.value},e.id)}))}),e.id),e.isExpanded&&Object(R.jsxs)(V.a,{colSpan:a.length+1,children:[Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"metric-desc",children:"Here are the metrics for this pricing plan.You can even fire events from them to see if things are hooked up right."}),Object(R.jsx)("div",{className:"align-right",children:Object(R.jsx)(h.a,{id:t,name:s[t].instanceId,onClick:ie,className:"test-metric-btn",children:"Test metric reporting"})})]}),Object(R.jsx)("div",{children:Object(R.jsx)(g.a,{rows:de(s[t].planId),headers:F.tableHeaders.Metric,children:function(e){var t=e.rows,a=e.headers,c=e.getHeaderProps,n=e.getTableProps;return Object(R.jsx)(f.a,{title:"",children:Object(R.jsxs)(y.a,Object(p.a)(Object(p.a)({className:"metric-table"},n()),{},{children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(S.a,{children:a.map((function(e){return Object(R.jsx)(C.a,Object(p.a)(Object(p.a)({},c({header:e})),{},{children:e.header}))}))})}),Object(R.jsx)(D.a,{className:"metric-table-body",children:t.map((function(e){return Object(R.jsx)(S.a,{children:e.cells.map((function(e){return Object(R.jsx)(E.a,{style:{paddingLeft:"1rem"},children:e.value},e.id)}))},e.id)}))})]}))})}})})]})]})}))})]}))]},"tableContainer")}})})})})}),x&&Object(R.jsx)(Y,{closePanel:function(){M(!x)},instance:W,metrics:ne,plan:ee})]})}z.displayName="Instances";var X=z;function $(){var e=Object(c.useState)(!0),t=Object(j.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)({}),r=Object(j.a)(s,2),i=r[0],p=r[1],g=Object(c.useState)("#"),f=Object(j.a)(g,2),v=f[0],N=f[1],w=Object(c.useState)("#"),k=Object(j.a)(w,2),y=k[0],I=k[1];Object(c.useEffect)((function(){_.a.isEmpty(i)&&S()}));var S=function(){var e=Object(d.a)(l.a.mark((function e(){var t,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Headers).append("Content-Type","application/json"),t.append("Accept","application/json"),a={method:"GET",headers:t,redirect:"follow",mode:"cors"},e.next=6,L(F.apiUrls.getCatalog,a);case 6:return c=e.sent,_.a.isEmpty(c)||(p(c),N(c.services[0].metadata.instructionsUrl),I(c.services[0].metadata.documentationUrl)),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(R.jsx)("div",{className:"container",children:Object(R.jsxs)("div",{className:"bx--grid",children:[Object(R.jsxs)("div",{className:"bx--row",children:[Object(R.jsxs)("div",{className:"bx--col-lg-12",children:[Object(R.jsx)("span",{className:"h3",children:_.a.isEmpty(i)?Object(R.jsx)(o.a,{width:"15%",className:"skeletopn-text"}):i.services[0].name}),Object(R.jsxs)("span",{children:[Object(R.jsx)(m.b,{"aria-label":"status",className:"svg-left fill-green"})," Running"]})]}),Object(R.jsx)("div",{className:"bx--col-lg-4 link-blank",children:Object(R.jsxs)(b.a,{className:"",target:"_blank",href:"#",children:["Manage on IBM Cloud",Object(R.jsx)(O.a,{"aria-label":"open link",className:"svg-right fill-link"})]})})]}),Object(R.jsxs)("div",{className:"bx--grid broker-info",children:[Object(R.jsxs)("div",{className:"bx--row sub-row",children:[Object(R.jsx)("div",{className:"bx--col-lg-12",children:Object(R.jsx)("span",{className:"h5",children:"Service broker"})}),Object(R.jsx)("div",{className:"bx--col-lg-4 link-left",children:Object(R.jsxs)(b.a,{className:"",target:"_blank",href:"#",children:["Partner Center | Sell",Object(R.jsx)(O.a,{"aria-label":"open link",className:"svg-right fill-link"})]})})]}),Object(R.jsxs)("div",{className:"bx--row sub-row",children:[Object(R.jsx)("div",{className:"bx--col-lg-12",children:Object(R.jsxs)("p",{children:[_.a.isEmpty(i)?Object(R.jsx)(o.a,{width:"15%",className:"skeletopn-text"}):i.services[0].description,Object(R.jsxs)(b.a,{className:"inline-link",target:"_blank",href:y,children:["Learn more",Object(R.jsx)(O.a,{"aria-label":"open link",className:"svg-right fill-link"})]})]})}),Object(R.jsx)("div",{className:"bx--col-lg-4 link-left",children:Object(R.jsxs)(b.a,{className:"",target:"_blank",href:v,children:["How to use",Object(R.jsx)(O.a,{"aria-label":"open link",className:"svg-right fill-link"})]})})]}),Object(R.jsx)("div",{className:"bx--row sub-row",children:Object(R.jsxs)("div",{className:"bx--col-lg-16",children:[Object(R.jsx)("div",{className:"bx--label",children:"Build number"}),Object(R.jsx)(u.a,{children:F.buildNumber})]})})]}),a?Object(R.jsx)(B,{catalog:i}):Object(R.jsx)(X,{catalog:i}),Object(R.jsxs)(h.a,{className:"tableToggle",onClick:function(){n(!a)},renderIcon:x.b,iconDescription:"toggle table",kind:"tertiary",children:["View ",F.tables[a?1:0]]})]})})}$.displayName="Default";var ee=$,te=a(64),ae=a(8);var ce=function(){return Object(R.jsx)("div",{className:"App",children:Object(R.jsx)(te.a,{children:Object(R.jsx)(te.b,{children:Object(R.jsxs)(ae.d,{children:[Object(R.jsx)(ae.b,{exact:!0,path:"/",component:ee}),Object(R.jsx)(ae.a,{from:"*",to:"/"})]})})})})},ne=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,120)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(R.jsx)(n.a.StrictMode,{children:Object(R.jsx)(ce,{})}),document.getElementById("root")),ne()},70:function(e){e.exports=JSON.parse('[{"id":"crn113","instanceId":"crn113","name":"manjula1","planId":"613c900c-781e-4f2d-ae20-0c45ed3f7464","status":"ACTIVE","region":"dal03","updateDate":"2021-10-26T09:42:34.998097300Z"},{"id":"crn112","instanceId":"crn112","name":"manjula1","planId":"613c900c-781e-4f2d-ae20-0c45ed3f7464","status":"ACTIVE","region":"dal03","updateDate":"2021-10-26T09:42:41.539697400Z"}]')},85:function(e,t,a){},86:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){}},[[100,1,2]]]);
//# sourceMappingURL=main.71e53dfc.chunk.js.map